## Linux中磁盘的管理（分区、格式化、挂载）

### 一、认识磁盘
**1.什么是磁盘**
磁盘是一种计算机的外部存储器设备，由一个或多个覆盖有磁性材料的铝制或玻璃制的碟片组成，用来存储用户的信息，这种信息可以反复地被读取和改写。绝大多数磁盘被永久封存在一个密封的盒子里。

![磁盘](../picture/%E7%A3%81%E7%9B%98%E7%85%A7%E7%89%87.jpg)

**2、磁盘运行机理：**
简单来说就是多个盘片之间靠主轴连接，电机带动主轴做旋转运动，通过多个磁头臂的摇摆和磁盘的旋转，磁头就可以在磁盘旋转的过程中就读取到磁盘中存储的各种数据

**3、磁盘的扇区、磁道、柱面：**
（1）磁道：磁盘的每个盘面被划分为许多同心圆，这些同心圆的轨道叫做磁道。
（2）扇区：一个盘面划分为若干个内角相同的扇形，这样盘面上的每个磁道就被分为若干段圆弧，每段圆弧叫做一个扇区。每个扇区中的数据作为一个单元同时被读入或写入。每一个扇区是512字节，其中有64个字节存储的是分区表，一条分区信息占16个字节。
（3）柱面：每一个盘片同一大小的同心圆可以看成连在一起的柱面，磁盘在分区的时候最小单位是柱面，每一个盘片的上下面都可以读取数据，每一个磁头，不可以跨盘面读取数据。

![磁盘1](../picture/%E7%A3%81%E7%9B%98%E7%85%A7%E7%89%872.jpg)

![磁盘2](../picture/%E7%A3%81%E7%9B%98%E7%85%A7%E7%89%873.png)

**4、磁盘的分类：**
（1）IDE磁盘：特点价格低廉，兼容性强，性价比高，数据传输慢，不支持热插拔等等。
（2）SCSI磁盘：传输速率高，读写性能好，运行稳定，可连接多个设备。可支持热插拔，占用CPU低，但是价格相对来说比较贵，一般用于工作站或服务器上。
（3）SATA磁盘：结构简单、支持热插拔
（4）USB
其中IDE的磁盘的文件名为　　　　　　　　　 /dev/hd[a-d]
而SCSI、SATA、USB的磁盘文件名为　　　　/dev/sd[a-p]

### 磁盘分区管理方法

**1.磁盘分区命令fdisk**
在安装ubuntu的时候可以使用这个命令对硬盘进行分区

![分区管理](../picture/%E5%88%86%E5%8C%BA%E7%9A%84%E6%93%8D%E4%BD%9C.png)

> 进行分区的时候参数 p显示先后分区 n建立分区 t更改分区 d删除> 分区 wq对分区更改并写入硬盘并退出

> fdisk [参数] 应用的最广的参数就是 -l

> -b<分区大小> -s<分区编号> 

* mkfs 针对某一个分区在它上面创建一个新的文件系统（即改变格式）

**2. 其他的命令**
* 显示磁盘信息 df
df [参数] [设备或区块]
> df -a 包含全部的文件系统

* 显示目录的容量 du

语法：du [参数] [目标目录]
> -a 显示目录所有文件的大小

### 磁盘的挂载
**1、认识挂载：**
（1）Linux的宗旨是一切皆文件，从以上我们也看到。我们存储的所有文件都在sda3下存放着，sda3也就是我们的根。那我们要在sda5中写入文件时，首先要sda5要与sda3先建立一个联系，这个联系就是一个目录。建立联系的过程我们叫做挂载。
（2）当我们访问sda3底下的这个目录的时候，实际上我们访问的才是sda5这个设备文件。这个目录相当于一个访问sda5的入口，可以理解为一个接口，有了这个接口才可以访问这个磁盘。
（3）挂载的含义就是把磁盘的内容放到某一个目录下
（4）**Linux中的根目录以外的文件要想被访问，需要将其“关联”到根目录下的某个目录来实现，这种关联操作就是“挂载”，这个目录就是“挂载点”，解除次关联关系的过程称之为“卸载”。**

**2.挂载的常用命令** 经常使用mount命令
* 语法：mount [参数] -t [类型] [设备名称] [目的地目录]

**3.除了挂载之外还有卸载的功能，就是取消挂载目录**
* 语法：unmout [参数] -t [文件系统类型] [文件系统]


**本节所用到的主要Linux的命令总结**
命令|	该命令的注释
|-|-|
fdisk -l	|查看当前磁盘的分区状况
fdisk /dev/sda|	让硬盘进入分区模式，所分的磁盘在 /dev 下的 sda 这块磁盘
partprobe	|将分区信息读到内核中
mkfs.ext2 /dev/sda5	|将 /dev下的 sda5 磁盘格式化为 ext2 的格式类型
mount /dev/sda5 /test	|将 /dev/sda5 挂载到 test 中
umount /dev/sda5或者umount /test	|卸载已经挂载的 /dev/sda5磁盘也就是作为挂载接口的test目录
mount	|查看当前磁盘的详细挂载信息
df -h	|查看磁盘的信息（推荐）
blkid	|查看对应分区的UUID（编号）
